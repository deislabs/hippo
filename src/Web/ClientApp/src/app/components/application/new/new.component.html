<article *ngIf="error" class="message is-danger">
	<div class="message-header">
		<p>Error</p>
		<button class="delete" aria-label="delete"></button>
	</div>
	<div class="message-body">
		{{error}}
	</div>
</article>

<form [formGroup]="appForm" (ngSubmit)="onSubmit()">
	<nav class="panel is-primary">
		<p class="panel-heading">
			New Application
		</p>
		<div class="panel-block">
			<div class="field">
				<label class="label">Name</label>
				<div class="control has-icons-left has-icons-right">
					<input type="text" formControlName="name"
						[ngClass]="{ 'is-danger': submitted && f['name'].errors }"
						class="input" placeholder="amphibius" />
					<div *ngIf="submitted && f['name'].errors" class="help is-danger">
						<div *ngIf="f['name'].errors['required']">Name is required.</div>
					</div>
				</div>
			</div>
		</div>
		<div class="panel-block">
			<div class="field">
				<label class="label">Storage</label>
				<div class="control has-icons-left">
					<input type="text" formControlName="storageId"
					[ngClass]="{ 'is-danger': submitted && f['storageId'].errors }"
						class="input" placeholder="Storage ID" />
					<div *ngIf="submitted && f['storageId'].errors" class="help is-danger">
						<div *ngIf="f['storageId'].errors['required']">Storage ID is required.</div>
					</div>
					<span class="icon is-left">
						<i class="fas fa-search" aria-hidden="true"></i>
					</span>
				</div>
			</div>
		</div>
		<a *ngFor="let storage of storageList" class="panel-block is-active">
			<span class="panel-icon">
				<i class="fas fa-book" aria-hidden="true"></i>
			</span>
			{{ storage }}
		</a>
	</nav>

	<button [disabled]="loading" class="button is-primary">
		<span *ngIf="loading" class="spinner-border spinner-border-sm mr-1"></span>
		Create
	</button>
</form>
